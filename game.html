<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Primary Meta Tags -->
  <title>Play Against AI - So Long Sucker | Can You Out-Deceive Gemini 3?</title>
  <meta name="title" content="Play Against AI - So Long Sucker | Can You Out-Deceive Gemini 3?">
  <meta name="description" content="Play John Nash's 1950 betrayal game against AI models like Gemini 3, GPT, Kimi. Form alliances, make promises, then betray - or be betrayed. Uses your API key.">
  <meta name="keywords" content="play AI game, Gemini 3 game, AI opponent, LLM game, John Nash game, strategy game, negotiation game, betrayal game, GPT game, AI benchmark">
  <meta name="author" content="lout33">
  <meta name="robots" content="index, follow, max-image-preview:large">

  <!-- Favicon - SVG with emoji for simplicity -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŽ²</text></svg>">
  <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŽ²</text></svg>">

  <!-- Theme Color -->
  <meta name="theme-color" content="#1a1a2e">
  <meta name="msapplication-TileColor" content="#1a1a2e">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://so-long-sucker.vercel.app/game.html">
  <meta property="og:title" content="Play Against AI - Can You Out-Deceive Gemini 3?">
  <meta property="og:description" content="Challenge Gemini 3, GPT, Kimi in John Nash's betrayal game. Form alliances, make promises, then betray - before they betray you.">
  <meta property="og:image" content="https://so-long-sucker.vercel.app/og-image.svg">
  <meta property="og:site_name" content="So Long Sucker">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://so-long-sucker.vercel.app/game.html">
  <meta name="twitter:title" content="Can You Out-Deceive Gemini 3?">
  <meta name="twitter:description" content="Play John Nash's betrayal game against AI. Form alliances, then betray - or be betrayed. Which AI will you face?">
  <meta name="twitter:image" content="https://so-long-sucker.vercel.app/og-image.svg">

  <!-- Canonical URL -->
  <link rel="canonical" href="https://so-long-sucker.vercel.app/game.html">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="style.css">

  <!-- Microsoft Clarity -->
  <script type="text/javascript">
      (function(c,l,a,r,i,t,y){
          c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
          t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
          y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
      })(window, document, "clarity", "script", "v4lnk6c8jr");
  </script>

  <!-- Structured Data (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "So Long Sucker",
    "description": "A 4-player negotiation and betrayal board game created by John Nash in 1950. Play against AI opponents powered by LLMs.",
    "url": "https://so-long-sucker.vercel.app/",
    "applicationCategory": "GameApplication",
    "operatingSystem": "Web Browser",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "author": {
      "@type": "Person",
      "name": "John Nash",
      "description": "Nobel Prize-winning mathematician and game theorist"
    },
    "dateCreated": "1950",
    "keywords": ["board game", "strategy", "game theory", "negotiation", "AI"]
  }
  </script>
</head>
<body>
  <!-- Grain overlay -->
  <div class="grain-overlay"></div>

  <!-- Navigation -->
  <nav id="main-nav">
    <a href="index.html" class="nav-brand">So Long Sucker</a>
    <div class="nav-links">
      <a href="index.html#leaderboard" class="nav-link">Leaderboard</a>
      <a href="index.html#insights" class="nav-link">Insights</a>
      <a href="https://github.com/lout33/so-long-sucker" target="_blank" rel="noopener" class="nav-link nav-github" title="Star on GitHub">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/>
        </svg>
      </a>
    </div>
  </nav>

  <!-- Setup Screen -->
  <div id="setup-screen">
    <!-- Mode Selection -->
    <div class="setup-content">
      <div id="mode-selection" class="mode-selection">
        <div class="mode-card" id="mode-play">
          <div class="mode-icon">&#127922;</div>
          <h3>Play Game</h3>
          <p>Human vs AI mix<br>Interactive play</p>
          <button class="btn btn-primary btn-mode">Start Setup</button>
        </div>
        <!-- Simulation mode hidden - use CLI for AI vs AI simulations (npm run simulate) -->
        <div class="mode-card" id="mode-simulate" style="display: none;">
          <div class="mode-icon">&#128300;</div>
          <h3>Simulation Mode</h3>
          <p>Watch AI vs AI games<br>Collect statistics</p>
          <button class="btn btn-secondary btn-mode">Configure</button>
        </div>
      </div>

      <!-- Play Game Setup (existing) -->
      <div id="play-setup" class="setup-body hidden">
        <button class="btn btn-back" id="back-to-modes">&larr; Back</button>

        <div class="setup-section rules-section">
          <h2><span class="section-number">00</span>How to Play</h2>
          <div class="rules-container">
            <div class="rules-quick">
              <div class="rules-grid">
                <div class="rule-item">
                  <span class="rule-icon">1</span>
                  <div class="rule-text">
                    <strong>Play chips on piles</strong>
                    <span>Take turns placing chips from your supply or prisoners onto piles</span>
                  </div>
                </div>
                <div class="rule-item">
                  <span class="rule-icon">2</span>
                  <div class="rule-text">
                    <strong>Capture when colors match</strong>
                    <span>If your chip matches the one directly below, you capture the pile</span>
                  </div>
                </div>
                <div class="rule-item">
                  <span class="rule-icon">3</span>
                  <div class="rule-text">
                    <strong>Ask for donations</strong>
                    <span>No chips? Ask others to donate. If all refuse, you're eliminated</span>
                  </div>
                </div>
                <div class="rule-item">
                  <span class="rule-icon">4</span>
                  <div class="rule-text">
                    <strong>Last player wins</strong>
                    <span>Form alliances, make promises, then betray - only one survives</span>
                  </div>
                </div>
              </div>
              <details class="rules-details">
                <summary>Full Rules</summary>
                <div class="rules-full">
                  <h4>Setup</h4>
                  <p>4 players, each with 7 chips of their color (red, blue, green, yellow). The table starts empty.</p>

                  <h4>On Your Turn</h4>
                  <ol>
                    <li><strong>Select a chip</strong> from your supply or prisoners (chips you've captured from others)</li>
                    <li><strong>Play it</strong> on an existing pile or start a new pile</li>
                    <li>If your chip <strong>matches the color directly below</strong> it, you capture the entire pile</li>
                  </ol>

                  <h4>Capturing</h4>
                  <ul>
                    <li>When you capture, choose one chip from the pile to <strong>kill</strong> (goes to dead box)</li>
                    <li>Keep the rest as <strong>prisoners</strong> (you can play them later)</li>
                    <li>Prisoners of your own color return to your supply</li>
                  </ul>

                  <h4>Next Player</h4>
                  <ul>
                    <li>Look at the pile you just played on</li>
                    <li>Find the <strong>deepest chip</strong> whose owner is still alive</li>
                    <li>That player goes next</li>
                    <li>If a color is missing from all piles, current player chooses who goes next</li>
                  </ul>

                  <h4>Donations</h4>
                  <ul>
                    <li>No chips in supply AND no prisoners? You must <strong>request a donation</strong></li>
                    <li>Ask each player in turn. If someone donates, you continue</li>
                    <li>If <strong>all refuse</strong>, you're eliminated</li>
                  </ul>

                  <h4>Winning</h4>
                  <p>The last player alive wins. Since you need others' chips to survive, alliances form. But only one can win - betrayal is inevitable.</p>
                </div>
              </details>
              <div class="rules-links">
                <a href="https://www.youtube.com/watch?v=DLDzweHxEHg" target="_blank" rel="noopener" class="rules-link">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/></svg>
                  Watch Tutorial (15 min)
                </a>
                <a href="https://en.wikipedia.org/wiki/So_Long_Sucker" target="_blank" rel="noopener" class="rules-link">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>
                  Wikipedia Rules
                </a>
              </div>
            </div>
          </div>
        </div>

        <div class="setup-section">
          <h2><span class="section-number">01</span>Players</h2>
          <div class="player-grid">
            <div class="player-setup-card" data-color="red">
              <div class="player-chip-display red"></div>
              <span class="player-color-name">Red</span>
              <select id="player-0-type" class="player-type-select">
                <option value="human">Human</option>
                <option value="ai">AI</option>
              </select>
              <select id="player-0-model" class="player-model-select hidden">
                <option value="moonshotai/kimi-k2-instruct-0905" selected>Kimi K2</option>
                <option value="llama-3.3-70b-versatile">Llama 3.3 70B</option>
                <option value="qwen/qwen3-32b">Qwen 3 32B</option>
              </select>
            </div>
            <div class="player-setup-card" data-color="blue">
              <div class="player-chip-display blue"></div>
              <span class="player-color-name">Blue</span>
              <select id="player-1-type" class="player-type-select">
                <option value="human">Human</option>
                <option value="ai" selected>AI</option>
              </select>
              <select id="player-1-model" class="player-model-select">
                <option value="moonshotai/kimi-k2-instruct-0905" selected>Kimi K2</option>
                <option value="llama-3.3-70b-versatile">Llama 3.3 70B</option>
                <option value="qwen/qwen3-32b">Qwen 3 32B</option>
              </select>
            </div>
            <div class="player-setup-card" data-color="green">
              <div class="player-chip-display green"></div>
              <span class="player-color-name">Green</span>
              <select id="player-2-type" class="player-type-select">
                <option value="human">Human</option>
                <option value="ai" selected>AI</option>
              </select>
              <select id="player-2-model" class="player-model-select">
                <option value="moonshotai/kimi-k2-instruct-0905" selected>Kimi K2</option>
                <option value="llama-3.3-70b-versatile">Llama 3.3 70B</option>
                <option value="qwen/qwen3-32b">Qwen 3 32B</option>
              </select>
            </div>
            <div class="player-setup-card" data-color="yellow">
              <div class="player-chip-display yellow"></div>
              <span class="player-color-name">Yellow</span>
              <select id="player-3-type" class="player-type-select">
                <option value="human">Human</option>
                <option value="ai" selected>AI</option>
              </select>
              <select id="player-3-model" class="player-model-select">
                <option value="moonshotai/kimi-k2-instruct-0905" selected>Kimi K2</option>
                <option value="llama-3.3-70b-versatile">Llama 3.3 70B</option>
                <option value="qwen/qwen3-32b">Qwen 3 32B</option>
              </select>
            </div>
          </div>
        </div>

        <div class="setup-section" id="play-chips-config">
          <h2><span class="section-number">02</span>Chips Per Player</h2>
          <div class="option-buttons" id="play-chips-options">
            <button class="option-btn" data-value="3">3</button>
            <button class="option-btn" data-value="5">5</button>
            <button class="option-btn selected" data-value="7">7</button>
          </div>
          <p class="option-hint">Fewer chips = faster, more chaotic games &nbsp;Â·&nbsp; More chips = longer, more strategic play</p>
        </div>

        <div class="setup-section" id="test-state-config">
          <h2><span class="section-number">03</span>Test Scenario</h2>
          <div class="config-grid">
            <div class="config-field" style="grid-column: 1 / -1;">
              <label>Starting State</label>
              <select id="test-state-select">
                <option value="0">Default - Normal game start</option>
                <option value="1">Red has prisoners (blue, green, yellow)</option>
                <option value="2">Red almost winning</option>
                <option value="3">Donation needed - Blue has no chips</option>
                <option value="4">Capture ready - pile ready to capture</option>
                <option value="5">Late game - only Red and Blue alive</option>
                <option value="6">Choose next player - multiple options</option>
                <option value="7">Multiple piles in play</option>
                <option value="8">Prisoner exchange test</option>
              </select>
            </div>
          </div>
        </div>

        <div class="setup-section" id="ai-config">
          <h2><span class="section-number">04</span>AI Configuration</h2>

          <div class="provider-tabs">
            <button id="tab-free" class="provider-tab active" data-provider="free">
              <span class="tab-icon">&#9889;</span>
              Free Play
            </button>
            <button id="tab-openrouter" class="provider-tab" data-provider="openrouter">
              <span class="tab-icon">&#128273;</span>
              OpenRouter
            </button>
            <button id="tab-bedrock" class="provider-tab" data-provider="bedrock" style="display:none">
              <span class="tab-icon">&#9729;</span>
              AWS Bedrock
            </button>
          </div>

          <div id="panel-free" class="provider-panel active">
            <div class="free-play-info">
              <p class="ready-badge">&#10003; Ready to play</p>
              <p class="free-play-note">AI opponents powered by <strong>Gemini</strong> and <strong>Groq</strong> - no setup required.</p>
              <p class="free-play-models">Models: Gemini 3 Flash, GPT-OSS, Kimi K2, Llama 3.3</p>
            </div>
          </div>

          <div id="panel-bedrock" class="provider-panel">
            <div class="bedrock-info">
              <p class="ready-badge" id="bedrock-status">&#10003; Ready</p>
              <p class="free-play-note">AI opponents via <strong>AWS Bedrock</strong>. Key loaded from <code>VITE_BEDROCK_API_KEY</code>.</p>
            </div>
            <div class="bedrock-models-section">
              <label class="section-label">Models per Player</label>
              <div class="openrouter-player-models">
                <div class="openrouter-model-row" data-player="0">
                  <span class="player-chip-mini red"></span>
                  <span class="player-label">Red</span>
                  <select id="bedrock-model-0" class="bedrock-model-select">
                    <option value="us.anthropic.claude-sonnet-4-6">Claude Sonnet 4.6</option>
                    <option value="us.anthropic.claude-opus-4-6-v1">Claude Opus 4.6</option>
                    <option value="us.anthropic.claude-sonnet-4-5-20250929-v1:0">Claude Sonnet 4.5</option>
                    <option value="us.anthropic.claude-sonnet-4-20250514-v1:0">Claude Sonnet 4</option>
                  </select>
                </div>
                <div class="openrouter-model-row" data-player="1">
                  <span class="player-chip-mini blue"></span>
                  <span class="player-label">Blue</span>
                  <select id="bedrock-model-1" class="bedrock-model-select">
                    <option value="us.anthropic.claude-sonnet-4-6">Claude Sonnet 4.6</option>
                    <option value="us.anthropic.claude-opus-4-6-v1">Claude Opus 4.6</option>
                    <option value="us.anthropic.claude-sonnet-4-5-20250929-v1:0">Claude Sonnet 4.5</option>
                    <option value="us.anthropic.claude-sonnet-4-20250514-v1:0">Claude Sonnet 4</option>
                  </select>
                </div>
                <div class="openrouter-model-row" data-player="2">
                  <span class="player-chip-mini green"></span>
                  <span class="player-label">Green</span>
                  <select id="bedrock-model-2" class="bedrock-model-select">
                    <option value="us.anthropic.claude-sonnet-4-6">Claude Sonnet 4.6</option>
                    <option value="us.anthropic.claude-opus-4-6-v1">Claude Opus 4.6</option>
                    <option value="us.anthropic.claude-sonnet-4-5-20250929-v1:0">Claude Sonnet 4.5</option>
                    <option value="us.anthropic.claude-sonnet-4-20250514-v1:0">Claude Sonnet 4</option>
                  </select>
                </div>
                <div class="openrouter-model-row" data-player="3">
                  <span class="player-chip-mini yellow"></span>
                  <span class="player-label">Yellow</span>
                  <select id="bedrock-model-3" class="bedrock-model-select">
                    <option value="us.anthropic.claude-sonnet-4-6">Claude Sonnet 4.6</option>
                    <option value="us.anthropic.claude-opus-4-6-v1">Claude Opus 4.6</option>
                    <option value="us.anthropic.claude-sonnet-4-5-20250929-v1:0">Claude Sonnet 4.5</option>
                    <option value="us.anthropic.claude-sonnet-4-20250514-v1:0">Claude Sonnet 4</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          <div id="panel-openrouter" class="provider-panel">
            <div class="config-grid">
              <div class="config-field" style="grid-column: 1 / -1;">
                <label>OpenRouter API Key</label>
                <input type="password" id="openrouter-api-key" placeholder="sk-or-...">
                <p class="field-hint">Get your key at <a href="https://openrouter.ai/keys" target="_blank" rel="noopener">openrouter.ai/keys</a></p>
              </div>
            </div>

            <div class="openrouter-models-section">
              <label class="section-label">Models per Player</label>
              <p class="field-hint" style="margin-bottom: var(--space-md);">Enter model names from <a href="https://openrouter.ai/models" target="_blank" rel="noopener">openrouter.ai/models</a>. Each AI player can use a different model.</p>

              <div class="openrouter-player-models">
                <div class="openrouter-model-row" data-player="0">
                  <span class="player-chip-mini red"></span>
                  <span class="player-label">Red</span>
                  <input type="text" id="openrouter-model-0" class="openrouter-model-input" placeholder="meta-llama/llama-3.1-8b-instruct:free">
                </div>
                <div class="openrouter-model-row" data-player="1">
                  <span class="player-chip-mini blue"></span>
                  <span class="player-label">Blue</span>
                  <input type="text" id="openrouter-model-1" class="openrouter-model-input" placeholder="meta-llama/llama-3.1-8b-instruct:free">
                </div>
                <div class="openrouter-model-row" data-player="2">
                  <span class="player-chip-mini green"></span>
                  <span class="player-label">Green</span>
                  <input type="text" id="openrouter-model-2" class="openrouter-model-input" placeholder="meta-llama/llama-3.1-8b-instruct:free">
                </div>
                <div class="openrouter-model-row" data-player="3">
                  <span class="player-chip-mini yellow"></span>
                  <span class="player-label">Yellow</span>
                  <input type="text" id="openrouter-model-3" class="openrouter-model-input" placeholder="meta-llama/llama-3.1-8b-instruct:free">
                </div>
              </div>
            </div>

            <div class="api-test-row">
              <button id="test-openrouter-btn" class="btn btn-outline">Test Connection</button>
              <span id="openrouter-test-result" class="test-result"></span>
            </div>
          </div>

          <p class="api-note api-note-open-source">Open source project. Contribute on <a href="https://github.com/lout33/so-long-sucker" target="_blank" rel="noopener">GitHub</a>.</p>
        </div>

        <div class="setup-footer">
          <button id="continue-game-btn" class="btn btn-secondary">Continue Game</button>
          <button id="start-game-btn" class="btn btn-primary">Start New Game</button>
        </div>
      </div>

      <!-- Simulation Setup (new) -->
      <div id="simulation-setup" class="setup-body hidden">
        <button class="btn btn-back" id="back-to-modes-sim">&larr; Back</button>

        <div class="setup-section">
          <h2><span class="section-number">01</span>Parallel Games</h2>
          <div class="option-buttons" id="parallel-options">
            <button class="option-btn" data-value="1">1</button>
            <button class="option-btn" data-value="2">2</button>
            <button class="option-btn selected" data-value="4">4</button>
            <button class="option-btn" data-value="6">6</button>
            <button class="option-btn" data-value="8">8</button>
          </div>
          <p class="option-hint">Number of games running simultaneously on screen</p>
        </div>

        <div class="setup-section">
          <h2><span class="section-number">02</span>Chips Per Player</h2>
          <div class="option-buttons" id="chips-options">
            <button class="option-btn selected" data-value="3">3</button>
            <button class="option-btn" data-value="5">5</button>
            <button class="option-btn" data-value="7">7</button>
          </div>
          <p class="option-hint">Fewer chips = faster games (3 chips recommended for simulation)</p>
        </div>

        <div class="setup-section">
          <h2><span class="section-number">03</span>AI Configuration</h2>
          <div class="config-grid">
            <div class="config-field">
              <label>Provider</label>
              <select id="sim-ai-provider">
                <option value="groq:llama-3.3-70b-versatile" selected>Groq - Llama 3.3 70B</option>
                <option value="groq:moonshotai/kimi-k2-instruct-0905">Groq - Kimi K2</option>
                <option value="openai">OpenAI (GPT-4o-mini)</option>
                <option value="claude">Claude (Sonnet)</option>
                <option value="azure-claude">Azure Claude (Opus)</option>
              </select>
            </div>
            <div class="config-field">
              <label>API Key</label>
              <input type="password" id="sim-api-key" placeholder="Enter your API key">
            </div>
            <div class="config-field" id="sim-azure-resource-row">
              <label>Azure Resource</label>
              <input type="text" id="sim-azure-resource" placeholder="Azure resource name">
            </div>
          </div>
        </div>

        <div class="setup-footer">
          <button id="start-simulation-btn" class="btn btn-primary">Start Simulation</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Game Screen -->
  <div id="game-container" class="hidden">
    <!-- Header -->
    <header id="game-header">
      <div class="header-left">
        <h1>So Long Sucker</h1>
      </div>
      <div class="header-center">
        <div id="turn-indicator"></div>
        <div id="status-message"></div>
      </div>
      <div class="header-right">
        <button id="export-game-btn" class="btn btn-icon" title="Export game">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="17 8 12 3 7 8"/>
            <line x1="12" y1="3" x2="12" y2="15"/>
          </svg>
        </button>
        <label class="btn btn-icon" title="Import game">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="7 10 12 15 17 10"/>
            <line x1="12" y1="15" x2="12" y2="3"/>
          </svg>
          <input type="file" id="import-game-input" accept=".json" hidden>
        </label>
      </div>
    </header>

    <!-- Main game area -->
    <main id="game-board">
      <!-- Table (piles + dead box) -->
      <section id="table-area">
        <div id="piles-area">
          <div class="section-header">
            <h2>The Table</h2>
          </div>
          <div id="piles-container"></div>
        </div>

        <div id="dead-box">
          <div class="section-header">
            <h2>Dead Box</h2>
          </div>
          <div id="dead-chips"></div>
        </div>

        <!-- Player panels -->
        <div id="players-area">
          <div class="player-panel" data-player="0">
            <div class="player-indicator red"></div>
            <div class="player-info">
              <div class="player-header">
                <span class="player-name">Red</span>
                <span class="player-status"></span>
              </div>
              <div class="player-chips">
                <div class="chip-row supply">
                  <span class="label">Supply</span>
                  <span class="chips"></span>
                </div>
                <div class="chip-row prisoners">
                  <span class="label">Prisoners</span>
                  <span class="chips"></span>
                </div>
              </div>
            </div>
          </div>

          <div class="player-panel" data-player="1">
            <div class="player-indicator blue"></div>
            <div class="player-info">
              <div class="player-header">
                <span class="player-name">Blue</span>
                <span class="player-status"></span>
              </div>
              <div class="player-chips">
                <div class="chip-row supply">
                  <span class="label">Supply</span>
                  <span class="chips"></span>
                </div>
                <div class="chip-row prisoners">
                  <span class="label">Prisoners</span>
                  <span class="chips"></span>
                </div>
              </div>
            </div>
          </div>

          <div class="player-panel" data-player="2">
            <div class="player-indicator green"></div>
            <div class="player-info">
              <div class="player-header">
                <span class="player-name">Green</span>
                <span class="player-status"></span>
              </div>
              <div class="player-chips">
                <div class="chip-row supply">
                  <span class="label">Supply</span>
                  <span class="chips"></span>
                </div>
                <div class="chip-row prisoners">
                  <span class="label">Prisoners</span>
                  <span class="chips"></span>
                </div>
              </div>
            </div>
          </div>

          <div class="player-panel" data-player="3">
            <div class="player-indicator yellow"></div>
            <div class="player-info">
              <div class="player-header">
                <span class="player-name">Yellow</span>
                <span class="player-status"></span>
              </div>
              <div class="player-chips">
                <div class="chip-row supply">
                  <span class="label">Supply</span>
                  <span class="chips"></span>
                </div>
                <div class="chip-row prisoners">
                  <span class="label">Prisoners</span>
                  <span class="chips"></span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Negotiation Panel -->
      <section id="negotiation-panel">
        <div class="section-header">
          <h2>Negotiation</h2>
        </div>
        <div id="chat-area">
          <div id="chat-messages"></div>
          <div id="chat-input-area">
            <div id="chat-input-top">
              <select id="chat-player-select">
                <option value="0">Red</option>
                <option value="1">Blue</option>
                <option value="2">Green</option>
                <option value="3">Yellow</option>
              </select>
              <span id="chat-hint">Enter &rarr; send &nbsp;&middot;&nbsp; Shift+Enter &rarr; newline</span>
            </div>
            <div id="chat-input-row">
              <textarea id="chat-input" placeholder="Type your message..." rows="2"></textarea>
              <button id="chat-send-btn" class="btn btn-send" title="Send (Enter)">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="22" y1="2" x2="11" y2="13"/>
                  <polygon points="22 2 15 22 11 13 2 9 22 2"/>
                </svg>
              </button>
            </div>
          </div>
          <button id="give-prisoner-btn" class="btn btn-outline btn-full">Transfer Prisoner</button>
        </div>
      </section>
    </main>

    <!-- Modals -->
    <div id="donation-modal" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <div class="modal-icon">?</div>
        <h2>Donation Request</h2>
        <p id="donation-message"></p>
        <div id="donation-options" class="modal-options"></div>
      </div>
    </div>

    <div id="next-player-modal" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <div class="modal-icon">&rarr;</div>
        <h2>Choose Next Player</h2>
        <p>Who plays next?</p>
        <div id="next-player-options" class="modal-options"></div>
      </div>
    </div>

    <div id="capture-modal" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <div class="modal-icon">!</div>
        <h2>Capture!</h2>
        <p>Choose a chip to eliminate:</p>
        <div id="capture-chips" class="modal-chips"></div>
      </div>
    </div>

    <div id="game-over-modal" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <div class="modal-icon crown">&#9813;</div>
        <h2>Game Over</h2>
        <p id="winner-message"></p>
        <button id="restart-btn" class="btn btn-primary">Play Again</button>
      </div>
    </div>

    <div id="give-prisoner-modal" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <h2>Transfer Prisoner</h2>
        <div class="trade-form">
          <div class="trade-row">
            <label>From</label>
            <select id="give-from">
              <option value="0">Red</option>
              <option value="1">Blue</option>
              <option value="2">Green</option>
              <option value="3">Yellow</option>
            </select>
          </div>
          <div class="trade-row">
            <label>Select prisoner</label>
            <div id="give-prisoner-chips" class="prisoner-chips-grid"></div>
          </div>
          <div class="trade-row">
            <label>To</label>
            <select id="give-to">
              <option value="0">Red</option>
              <option value="1">Blue</option>
              <option value="2">Green</option>
              <option value="3">Yellow</option>
            </select>
          </div>
        </div>
        <div class="modal-actions">
          <button id="give-cancel-btn" class="btn btn-outline">Cancel</button>
          <button id="give-confirm-btn" class="btn btn-primary" disabled>Transfer</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Simulation Screen -->
  <div id="simulation-container" class="hidden">
    <header id="sim-header">
      <div class="header-left">
        <h1>Simulation Mode</h1>
      </div>
      <div class="header-center">
        <div id="sim-status">Running...</div>
        <div id="sim-progress">0 / 4 games complete</div>
      </div>
      <div class="header-right">
        <button id="sim-stop-btn" class="btn btn-outline">Stop</button>
        <button id="sim-restart-btn" class="btn btn-secondary">Run Again</button>
        <button id="sim-export-btn" class="btn btn-icon" title="Export logs">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="17 8 12 3 7 8"/>
            <line x1="12" y1="3" x2="12" y2="15"/>
          </svg>
        </button>
        <button id="sim-back-btn" class="btn btn-icon" title="Back to setup">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="19" y1="12" x2="5" y2="12"/>
            <polyline points="12 19 5 12 12 5"/>
          </svg>
        </button>
      </div>
    </header>

    <!-- Simulation Grid - adapts to 1, 2, 4, 6, or 8 games -->
    <div id="simulation-grid" class="simulation-grid cols-2">
      <!-- Mini game slots will be dynamically created -->
    </div>

    <!-- Stats Panel (shown when all complete) -->
    <div id="sim-stats-panel" class="hidden">
      <h2>Results</h2>
      <div id="sim-stats-content"></div>
    </div>
  </div>

  <script type="module" src="js/main.js"></script>

  <!-- Footer -->
  <footer id="app-footer">
    <a href="https://github.com/lout33" target="_blank" rel="noopener">
      Built by >lout33
    </a>
  </footer>
</body>
</html>
